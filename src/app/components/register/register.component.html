<app-header>
  
</app-header>

<div class="container">
  <form
    class="register-component"
    [formGroup]="registerForm"
    (ngSubmit)="submitDetails()"
  >
    <h2 class="header-form">S'enregister</h2>

    <div class="field">
      <input
        type="text"
        id="firstname"
        name="firstname"
        formControlName="firstname"
        required
        placeholder="Votre Prénom"
      />
      @if(firstname.invalid && firstname.dirty || firstname.touched){
      <small class="error">
        @if(firstname.errors?.['required']){
        <div>Prénom obligatoire</div>
        }
      </small>
      }
    </div>
    <div class="field">
      <input
        type="text"
        id="lastname"
        name="lastname"
        formControlName="lastname"
        required
        placeholder="Votre nom de famille"
      />
      @if(lastname.invalid && lastname.dirty || lastname.touched){
      <small class="error">
        @if(lastname.errors?.['required']){
        <div>Nom de famille obligatoire</div>
        }
      </small>
      }
    </div>
    <div class="field">
      <input
        type="text"
        id="nickname"
        name="nickname"
        formControlName="nickname"
        required
        placeholder="Votre surnom"
      />
      @if(nickname.invalid && nickname.dirty || nickname.touched){
      <small class="error">
        @if(nickname.errors?.['required']){
        <div>Pseudo obligatoire</div>
        } @if(nickname.errors?.['pattern']){
        <div>Pseudo invalide</div>
        }
      </small>
      }
    </div>

    <div class="field">
      
      <input
        type="email"
        id="email"
        name="email"
        formControlName="email"
        required
        placeholder="Email"
      />
      @if(email.invalid && email.dirty || email.touched){
      <small class="error">
        @if(email.errors?.['required']){
        <div>Email obligatoire</div>
        } @if(email.errors?.['email']){
        <div>Email invalide</div>
        }
      </small>
      }
    </div>

    <div class="field">
      <input
        type="string"
        id="niss"
        name="niss"
        formControlName="niss"
        required
        minlength="15"
        maxlength="15"
        placeholder="Numéro de registre national"
      />
      @if(niss.invalid && niss.dirty || niss.touched){
        
      <small class="error">
        @if(niss.errors?.['required']){
        <div>NISS obligatoire</div>
        }  @if(password.errors?.['maxlength']){
          <div>NISS trop long (15 caractères)</div>
          }
          @if(password.errors?.['minlength']){
            <div>NISS trop court (15 caractères)</div>
            }
      </small>
      }
    </div>
<h3>Mot de passe</h3>
    <div class="field">
      <input
        type="password"
        id="password"
        name="password"
        formControlName="password"
        required
        minlength="8"
        placeholder="Mot de passe"
      />
      @if(password.invalid && password.dirty || password.touched){
        
      <small class="error">
        @if(password.errors?.['required']){
        <div>Mot de passe obligatoire</div>
        }  @if(password.errors?.['minlength']){
          <div>Mot de passe trop court</div>
          }
      </small>
      }
    </div>

    <div class="field">
      <input
        type="password"
        id="confirmPassword"
        name="confirmPassword"
        formControlName="confirmPassword"
        required
        equalTo="password"
        placeholder="Confirmation du mot de passe"
        
      />
      @if(confirmPassword.invalid && confirmPassword.dirty ||
      confirmPassword.touched){
      <small class="error">
        @if(confirmPassword.errors?.['required']){
        <div>Confirmer le mot de passe</div>
        }
      </small>
      @if(registerForm.errors?.['passwordMismatch'] && confirmPassword.valid &&
      password.valid){
      <small class="error">
        <div>Les mots de passe ne correspondent pas</div>
      </small>
      }}
    </div>


    <form [formGroup]="registerForm">
      
    <h3>Adresse</h3>
    <div formGroupName="address">
      <label for="street">Nom de la rue</label>
      <input class="street" type="text" formControlName="street">
      <label for="number">Numéro</label>
      <input class="number" type="text" formControlName="number">
      <label for="zip_code">Code postal</label>
      <input class="zip-code" type="number" formControlName="zip_code">
      <label for="city">Ville</label>
      <input class="city" type="text" formControlName="city">
    </div>


</form>



    <button [disabled]="registerForm.invalid" type="submit">
      Créer mon compte
    </button>

    <div>Déjà membre? <a routerLink="/login">Connecte-toi couillon!</a></div>
  </form>
</div>
