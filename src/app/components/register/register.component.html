<div class="container">
  <form
    class="register-component"
    [formGroup]="registerForm"
    (ngSubmit)="submitDetails()"
  >
    <h2 class="header-form">S'enregister</h2>

    <div class="field">
      <label for="nickname">Surnom</label>
      <input
        type="text"
        id="nickname"
        name="nickname"
        formControlName="nickname"
        required
        placeholder="Votre surnom"
      />
      @if(nickname.invalid && nickname.dirty || nickname.touched){
      <small class="error">
        @if(nickname.errors?.['required']){
        <div>Pseudo obligatoire</div>
        } @if(nickname.errors?.['pattern']){
        <div>Pseudo invalide</div>
        }
      </small>
      }
    </div>

    <div class="field">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        formControlName="email"
        required
        placeholder="Email"
      />
      @if(email.invalid && email.dirty || email.touched){
      <small class="error">
        @if(email.errors?.['required']){
        <div>Email obligatoire</div>
        } @if(email.errors?.['email']){
        <div>Email invalide</div>
        }
      </small>
      }
    </div>

    <div class="field">
      <label for="password">Mot de passe</label>
      <input
        type="password"
        id="password"
        name="password"
        formControlName="password"
        required
        placeholder="Mot de passe"
      />
      @if(password.invalid && password.dirty || password.touched){
      <small class="error">
        @if(password.errors?.['required']){
        <div>Mot de passe obligatoire</div>
        }
      </small>
      }
    </div>

    <div class="field">
      <label for="confirmPassword">Confirmation du mot de passe</label>
      <input
        type="password"
        id="confirmPassword"
        name="confirmPassword"
        formControlName="confirmPassword"
        required
        placeholder="Confirmation du mot de passe"
      />
      @if(confirmPassword.invalid && confirmPassword.dirty ||
      confirmPassword.touched){
      <small class="error">
        @if(confirmPassword.errors?.['required']){
        <div>Confirmer le mot de passe</div>
        }
      </small>
      @if(registerForm.errors?.['passwordMismatch'] && confirmPassword.valid &&
      password.valid){
      <small class="error">
        <div>Les mots de passe ne correspondent pas</div>
      </small>
      }}
    </div>

    <button [disabled]="registerForm.invalid" type="submit">
      Créer mon compte
    </button>

    <div>Déjà membre? <a routerLink="/login">Connecte-toi couillon!</a></div>
  </form>
</div>
